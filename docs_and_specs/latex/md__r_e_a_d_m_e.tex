This repository contains the code to configure oscilloscopes, signal generators and DC power supplies.\hypertarget{md__r_e_a_d_m_e_autotoc_md1}{}\doxysection{Supported Devices}\label{md__r_e_a_d_m_e_autotoc_md1}

\begin{DoxyItemize}
\item SPD1305X DC Power Supply
\item Keysight 33500B Waveform Generator
\end{DoxyItemize}\hypertarget{md__r_e_a_d_m_e_autotoc_md2}{}\doxysection{Example}\label{md__r_e_a_d_m_e_autotoc_md2}
Check the \href{./test/main.cpp}{\texttt{ test file}} \hypertarget{md__r_e_a_d_m_e_autotoc_md3}{}\doxysection{Build}\label{md__r_e_a_d_m_e_autotoc_md3}

\begin{DoxyCode}{0}
\DoxyCodeLine{bash build.sh}

\end{DoxyCode}
 The built files are in out direction. The structure should be\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{out}
\DoxyCodeLine{├── \_include}
\DoxyCodeLine{│   ├── device.h}
\DoxyCodeLine{│   ├── spd1305.h}
\DoxyCodeLine{│   ├── kst33500.h}
\DoxyCodeLine{│   └── ...(other headers) }
\DoxyCodeLine{└── \_lib}
\DoxyCodeLine{    └── libce\_device.so(or .dylib, .dll)}

\end{DoxyCode}
\hypertarget{md__r_e_a_d_m_e_autotoc_md4}{}\doxysection{Usage}\label{md__r_e_a_d_m_e_autotoc_md4}
\hypertarget{md__r_e_a_d_m_e_autotoc_md5}{}\doxysubsection{Connect devices}\label{md__r_e_a_d_m_e_autotoc_md5}

\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{\#include "{}kst33500.h"{} // include right device header file}
\DoxyCodeLine{}
\DoxyCodeLine{int main() \{}
\DoxyCodeLine{    // provide a IP address, some devices may need an extra port parameter}
\DoxyCodeLine{    KST33500 k = KST33500("{}xx.xx.xx.xx"{}); }
\DoxyCodeLine{    k.connect();}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__r_e_a_d_m_e_autotoc_md6}{}\doxysubsection{Execute commands}\label{md__r_e_a_d_m_e_autotoc_md6}
\hypertarget{md__r_e_a_d_m_e_autotoc_md7}{}\doxysubsubsection{Use exec function to send SCPI commands.}\label{md__r_e_a_d_m_e_autotoc_md7}

\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{// set a SIN wave}
\DoxyCodeLine{k.exec("{}FUNCtion SIN"{});}

\end{DoxyCode}
 \hypertarget{md__r_e_a_d_m_e_autotoc_md8}{}\doxysubsubsection{Use wrapped functions}\label{md__r_e_a_d_m_e_autotoc_md8}
We wrapped some common commands to save your time. Here is an example. 
\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{k.function("{}SIN"{});}
\DoxyCodeLine{k.frequency("{}+1.0E+03"{});}
\DoxyCodeLine{k.voltage("{}+2.0"{}, "{}HIGH"{});}
\DoxyCodeLine{k.voltage("{}+0.0"{}, "{}LOW"{});}
\DoxyCodeLine{k.output(true);}
\DoxyCodeLine{k.phase("{}+90.0"{});}

\end{DoxyCode}
 The code above is equivalent to 
\begin{DoxyCode}{0}
\DoxyCodeLine{FUNCtion SIN}
\DoxyCodeLine{FREQuency +1.0E+05}
\DoxyCodeLine{VOLTage:HIGH +2.0}
\DoxyCodeLine{VOLTage:LOW +0.0}
\DoxyCodeLine{OUTPut ON}
\DoxyCodeLine{PHASe +90.0}

\end{DoxyCode}
\hypertarget{md__r_e_a_d_m_e_autotoc_md9}{}\doxysection{Development}\label{md__r_e_a_d_m_e_autotoc_md9}
In this lab, we use socket to send SCPI commands to devices in order control them remotely. ~\newline
 Check the documents in \href{./docs\%20and\%20specs}{\texttt{ Docs}} for SCPI commands.

Basically, you can run any commands using exec commands. For saving time, we wrapped some frequently used commands. But we cannot wrap all the commands.

Here is an instruction for wrapping a command. Let\textquotesingle{}s say you want to wrap a command of Keysight waveform generator\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{FUNCtion <function>}

\end{DoxyCode}
 which set a $<$function$>$ waveform. ~\newline
 Go to kst33500.\+h file and add a function signature called \char`\"{}function\char`\"{}. 
\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{int function(string fun);}

\end{DoxyCode}
 Go to skt33500.\+cpp file and add the implementation of this function. What you need to do is making an SCPI command and invoke the exec function. 
\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{int KST33500::function(string fun) \{}
\DoxyCodeLine{    string msg = "{}FUNCtion "{} + fun;}
\DoxyCodeLine{    exec(msg);}
\DoxyCodeLine{    return 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}
 That\textquotesingle{}s it. After that, you can use like\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{k.function("{}SIN"{});}

\end{DoxyCode}
 